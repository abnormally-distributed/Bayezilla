model{
  
  tau ~  dgamma(.01, .01)
  sigma2 <- 1 / tau
  
  raw_rho ~ dnorm(0, .01) T(0, )
  rho <- sqrt(1 / raw_rho)
  for (k in 1:N) {
    Sigma[k,k] <- sigma2 + .0000001 
  }
  for (i in 1:(N-1)) {
    for (j in (i+1):N) {
      Sigma[i,j] <- sigma2 * exp(-pow(rho*d[i,j],2))
      Sigma[j,i] <- Sigma[i,j]
    }
  }
  
  for (i in 1:N) {
    mu[i] ~ dt(0, 1, 3)
  }
  y ~ dmnorm.vcov(mu, Sigma)
  ySim ~ dmnorm.vcov(mu, Sigma)
}
